
# 3d 模型

3. 3d模型格式
   1. STL:3D打印 信息极少，就是三角形，无颜色 纹理 材质 动画
   2. OBJ:Wavefront 3D，只包含静态场景信息 几何体(顶点 法线)、材质(.mtl文件)、UV坐标，古老 通用 简单的静态场景格式
   3. FBX:Autodesk 完美传输模型、纹理、材质、动画、骨骼绑定、摄像机、灯光甚至场景层次，电影、游戏、建筑可视化行业的实际标准
   4. GLTF:WebGL web传输 json+外部文件或glb， 支持网格 材质 pbr 动画 骨骼 相机 场景
   5. 3DS:3D Studio Max
   6. ​​Blender (.blend)​​, ​​Maya (.ma, .mb)​​, ​​3ds Max (.max)

## obj格式解析
 obj 纯文本文件 line by line， v行 vt行 vn行 f行 f行格式:vertex/texture/normal,可以只包含v v/vt 或者v//vn, mtllib用于关联.mtl文件
主要指令：
1. 顶点数据指令 v vt vn vp
2. 面指令f f v1 v2 v3 f v1/vt1 v2/vt2 v3/vt3 f v1/t1/n1 v2/t2/n2 v3/t3/n3
3. 材质相关指令 mtlib filename.mtl 指定材质库; usemtl material_name 某些面使用材质库中的material_name; usemap map_name使用纹理贴图 在mtl文件中通过newmtl创建命名的材质
4. 组和对象指令 g group_name， o object_name
5. 曲线、曲面指令 cstype deg curv surf
6. mtl文件 可以包含以下材质属性 pbr属性 以及纹理图形

  std::string name;

  real_t ambient[3];
  real_t diffuse[3];
  real_t specular[3];
  real_t transmittance[3];
  real_t emission[3];
  real_t shininess;
  real_t ior;       // index of refraction
  real_t dissolve;  // 1 == opaque; 0 == fully transparent
  // illumination model (see http://www.fileformat.info/format/material/)
  int illum;

  int dummy;  // Suppress padding warning.

  std::string ambient_texname;   // map_Ka. For ambient or ambient occlusion.
  std::string diffuse_texname;   // map_Kd
  std::string specular_texname;  // map_Ks
  std::string specular_highlight_texname;  // map_Ns
  std::string bump_texname;                // map_bump, map_Bump, bump
  std::string displacement_texname;        // disp
  std::string alpha_texname;               // map_d
  std::string reflection_texname;          // refl

  texture_option_t ambient_texopt;
  texture_option_t diffuse_texopt;
  texture_option_t specular_texopt;
  texture_option_t specular_highlight_texopt;
  texture_option_t bump_texopt;
  texture_option_t displacement_texopt;
  texture_option_t alpha_texopt;
  texture_option_t reflection_texopt;

  // PBR extension
  // http://exocortex.com/blog/extending_wavefront_mtl_to_support_pbr
  real_t roughness;            // [0, 1] default 0
  real_t metallic;             // [0, 1] default 0
  real_t sheen;                // [0, 1] default 0
  real_t clearcoat_thickness;  // [0, 1] default 0
  real_t clearcoat_roughness;  // [0, 1] default 0
  real_t anisotropy;           // aniso. [0, 1] default 0
  real_t anisotropy_rotation;  // anisor. [0, 1] default 0
  real_t pad0;
  std::string roughness_texname;  // map_Pr
  std::string metallic_texname;   // map_Pm
  std::string sheen_texname;      // map_Ps
  std::string emissive_texname;   // map_Ke
  std::string normal_texname;     // norm. For normal mapping.

  texture_option_t roughness_texopt;
  texture_option_t metallic_texopt;
  texture_option_t sheen_texopt;
  texture_option_t emissive_texopt;
  texture_option_t normal_texopt;

  int pad2;

  std::map<std::string, std::string> unknown_parameter;

	o car_body #车身对象，包含车顶+车门
	g roof #车顶
	v ...
	f ...

	g doors #车门
	v ...
	f ...

	o wheels #车轮对象，包含前后轮组
	g front_wheel #前轮group
	v ...
	f ...

	g rear_wheel #后轮group
	v ...
	f ...

	obj文件的所有索引从1开始

## FBX格式

## .x格式

map-box ear-cut:tiny obj有实现
microsoft uvatlas

等高线 等温线 等降水线 等压线 概念 含义 如何绘制 阅读

温度单位:摄氏度 华氏度 开尔文，还有其他的不常见温度单位

# 3d 建模软件 DCC软件
3d 建模软件有很多
总体上可以分为Nurbs建模和mesh建模
Mesh是有polygon拼成的，近似于曲面，实际是很多曲面，随着细分次数的增加，曲面越接近真实曲面，但计算量也越大，放大后还是曲面，不具备高精度的尺寸控制，无法导出矢量模型 常见建模软件有C4D、Maya、3ds Max、Blender、ZBrush等
Nurbs是非均匀有理b样条，是基于数学公式的曲面，真正的曲面，可以导出矢量图，因其高精度，常用于工业设计领域，包括
1. CAID 外观设计领域 如RHino Alias
2. CAD类型 结构工程 结构建模，如UG CATIA SolidWorks AutoCAD

编辑器中的吸附功能
1. 网格吸附grid snapping，用于精确放置物体，在平移、旋转、缩放时，transform不会连续变化，而是按照增量跳跃变化，增量是通过计算虚拟网格与物体的交点，四舍五入到最近的整数点
2. 运行时动态吸附 dynamic snapping,基于碰撞检测,匹配anchor及connector
3. 大规模植被(foliage system)放置，系统吸附 system-level snapping,基于数据结构与批量计算


