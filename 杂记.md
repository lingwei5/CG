# GIS
Geographic Information System
1. 常见数据
卫片：人造卫星拍摄的影像
航片:飞机拍摄的影像 无人机 有人机

DEM:数字高程模型 可以通过航空摄影 激光雷达 卫星遥感 干涉合成孔径雷达等获得数据
DOM:数字正射影像图 卫片经过校正 以及DEM等获得数据,可以贴在DEM上当做纹理
DSM:数字表面模型 地物高程模型 地表+地面物体
DTM:数字地形模型 地表高程模型

dem可以生成等高线

拍摄影像 三维点云 构建tin网 构建白模 纹理映射

白模:纯几何结构与拓扑 白模​​（White Model）是指​​仅包含几何结构而不包含任何材质、纹理、贴图或照明的3D模型​​。它通常以单一的白色或灰色显示，专注于模型的​​几何形状​​和​​拓扑结构​​。
def validate_white_model(model):
    checks = {
        'manifold': check_manifold_geometry(model),      # 流形几何
        'non_degenerate': check_non_degenerate_faces(model), # 无退化面
        'normal_consistency': check_normals(model),     # 法线一致性
        'uv_ready': check_uv_readiness(model),          # UV展开就绪
        'polycount_optimal': check_polycount(model)      # 多边形数量优化
    }
    return all(checks.values())

Oblique Photography
倾斜摄影:一正四斜(前后左右) 垂直摄影(卫星遥感 航空正射摄影)

空三:空中三角测量 Aerotriangulation AT 是由摄影测量发展而来的一种测量方法，它通过分析多张影像之间的几何关系，计算出地面点的三维坐标。空中三角测量是三维重建的基础，它可以帮助我们得到稀疏点云，进而得到稠密点云，最后得到三维模型。
地三:地面控制点 Ground Control Point GCP？

表示数字高程模型的两种数据结构
   TIN网格 Triangulated Irregular Network TIN
   高程矩阵 grid 栅格

多视几何 三维重建
多视角成像 利用视差 计算三维坐标
视差匹配得到深度
深度得到点云

倾斜摄影获取的原始数据是啥?应该就是一系列的png图片，通过空三求解(包括特征提取、特征匹配、光束法平差)得到稀疏点云，再得到稠密点云 泊松重建得到mesh 纹理映射
后处理得到的数据格式可以是osgb obj fbx 3dtiles
点云分割得到DEM DSM DTM

**倾斜摄影得到的原始数据**
1. 多视角影像数据 一个垂直镜头四个倾斜镜头采集的jpg格式的 提供地物多角度的视觉信息，是三维重建的基础
2. 定位定姿数据 由GNSS(全球导航卫星系统global navigation satelite system)和IMU(惯性测量单元)系统记录的每张影像的外方位元素（如X, Y, Z, Omega, Phi, Kappa），通常存储在CSV或XML文件中（如Image.csv），提供影像的空间位置和姿态，用于空中三角测量和精确三维重建
3. 相机参数文件 记录相机的内方位元素（如焦距、像主点）和镜头畸变参数等，通常存储在CSV文件（如Camera.csv）中 用于校正影像畸变，保证几何精度
4. 元数据文件 ​如metadata.xml文件，记录整个数据集的坐标系、插入点坐标、生产信息等 描述数据的空间参考和基本属性，便于后续处理软件正确读取和定位数据
5. 数据组织文件 如OSGB格式数据对应的配置文件（.s3c）、层级目录结构等 管理海量的、分块多层级(LOD)存储的模型文件，确保数据能被正确加载和浏览。


常用软件工具
​​自动化处理软件​​：
​​ContextCapture (Bentley)​​：行业标杆，生成的模型和点云质量极高。以前叫smart3d
​​Pix4D​​：非常流行，尤其在测绘和农业领域。
​​大疆智图 (DJI Terra)​​：对大疆无人机优化好，性价比高。
​​PhotoScan (现为Metashape, Agisoft)​​：功能强大，用户群体广。
​​点云分类与DEM编辑软件​​：
​​Global Mapper​​：功能全面，点云分类和DEM编辑功能非常强大且易用。
​​ArcGIS (3D Analyst模块)​​：GIS平台，适合后续的分析和展示。
​​CloudCompare​​：开源免费的强大点云处理软件，可以进行分类和导出，但自动化程度不如商业软件。

sketchup
cesium给予webgl 3dtiles(基于glTF)
osgEarth

earthmaker里面的文件格式 通用 专有

3S:GIS GPS RS

北京:东经115° 北纬40°

1. 常见坐标系
   1. 大地坐标系:定位地球上的点 用经度 纬度 高程表示 lambda phi h
	由于地球不是完美的椭球体 需要定义一个基准椭球体来表示地球
	事实上的标准是WGS84 World Geodetic System 1984,
		本初子午线(英国格林尼治天文台)以东或以西
		赤道(非洲赤道)以北或以南
		高程相对于 ​​WGS 84 椭球面​​的高度（单位：米）。请注意，这不同于我们常说的“海拔高”（相对于大地水准面）
   2. 地心地固直角坐标系:计算机内部计算
		原点在地球质心
		z轴指向北极
		x轴指向本初子午线与赤道的交点,即经度0 纬度0的点
		y轴指向东经90度
		xyz轴构成右手系
		xyz轴的单位是米
   3. 投影坐标系:在平面上展开地球
      1. Mercator投影:google地图 bing地图 OpenStreetMap等web地图服务底层都是墨卡托投影
		保持形状不变，等角投影, 但面积变形严重

GIS中的距离和角度
geodisc测地距离

# 3d 模型

3. 3d模型格式
   1. STL:3D打印 信息极少，就是三角形，无颜色 纹理 材质 动画
   2. OBJ:Wavefront 3D，只包含静态场景信息 几何体(顶点 法线)、材质(.mtl文件)、UV坐标，古老 通用 简单的静态场景格式
   3. FBX:Autodesk 完美传输模型、纹理、材质、动画、骨骼绑定、摄像机、灯光甚至场景层次，电影、游戏、建筑可视化行业的实际标准
   4. GLTF:WebGL web传输 json+外部文件或glb， 支持网格 材质 pbr 动画 骨骼 相机 场景
   5. 3DS:3D Studio Max
   6. ​​Blender (.blend)​​, ​​Maya (.ma, .mb)​​, ​​3ds Max (.max)

## obj格式解析
 obj 纯文本文件 line by line， v行 vt行 vn行 f行 f行格式:vertex/texture/normal,可以只包含v v/vt 或者v//vn, mtllib用于关联.mtl文件
主要指令：
1. 顶点数据指令 v vt vn vp
2. 面指令f f v1 v2 v3 f v1/vt1 v2/vt2 v3/vt3 f v1/t1/n1 v2/t2/n2 v3/t3/n3
3. 材质相关指令 mtlib filename.mtl 指定材质库; usemtl material_name 某些面使用材质库中的material_name; usemap map_name使用纹理贴图 在mtl文件中通过newmtl创建命名的材质
4. 组和对象指令 g group_name， o object_name
5. 曲线、曲面指令 cstype deg curv surf
6. mtl文件 可以包含以下材质属性 pbr属性 以及纹理图形

  std::string name;

  real_t ambient[3];
  real_t diffuse[3];
  real_t specular[3];
  real_t transmittance[3];
  real_t emission[3];
  real_t shininess;
  real_t ior;       // index of refraction
  real_t dissolve;  // 1 == opaque; 0 == fully transparent
  // illumination model (see http://www.fileformat.info/format/material/)
  int illum;

  int dummy;  // Suppress padding warning.

  std::string ambient_texname;   // map_Ka. For ambient or ambient occlusion.
  std::string diffuse_texname;   // map_Kd
  std::string specular_texname;  // map_Ks
  std::string specular_highlight_texname;  // map_Ns
  std::string bump_texname;                // map_bump, map_Bump, bump
  std::string displacement_texname;        // disp
  std::string alpha_texname;               // map_d
  std::string reflection_texname;          // refl

  texture_option_t ambient_texopt;
  texture_option_t diffuse_texopt;
  texture_option_t specular_texopt;
  texture_option_t specular_highlight_texopt;
  texture_option_t bump_texopt;
  texture_option_t displacement_texopt;
  texture_option_t alpha_texopt;
  texture_option_t reflection_texopt;

  // PBR extension
  // http://exocortex.com/blog/extending_wavefront_mtl_to_support_pbr
  real_t roughness;            // [0, 1] default 0
  real_t metallic;             // [0, 1] default 0
  real_t sheen;                // [0, 1] default 0
  real_t clearcoat_thickness;  // [0, 1] default 0
  real_t clearcoat_roughness;  // [0, 1] default 0
  real_t anisotropy;           // aniso. [0, 1] default 0
  real_t anisotropy_rotation;  // anisor. [0, 1] default 0
  real_t pad0;
  std::string roughness_texname;  // map_Pr
  std::string metallic_texname;   // map_Pm
  std::string sheen_texname;      // map_Ps
  std::string emissive_texname;   // map_Ke
  std::string normal_texname;     // norm. For normal mapping.

  texture_option_t roughness_texopt;
  texture_option_t metallic_texopt;
  texture_option_t sheen_texopt;
  texture_option_t emissive_texopt;
  texture_option_t normal_texopt;

  int pad2;

  std::map<std::string, std::string> unknown_parameter;

	o car_body #车身对象，包含车顶+车门
	g roof #车顶
	v ...
	f ...

	g doors #车门
	v ...
	f ...

	o wheels #车轮对象，包含前后轮组
	g front_wheel #前轮group
	v ...
	f ...

	g rear_wheel #后轮group
	v ...
	f ...

	obj文件的所有索引从1开始

## FBX格式

## .x格式

map-box ear-cut:tiny obj有实现
microsoft uvatlas

等高线 等温线 等降水线 等压线 概念 含义 如何绘制 阅读

温度单位:摄氏度 华氏度 开尔文，还有其他的不常见温度单位

# 3d 建模软件 DCC软件
3d 建模软件有很多
总体上可以分为Nurbs建模和mesh建模
Mesh是有polygon拼成的，近似于曲面，实际是很多曲面，随着细分次数的增加，曲面越接近真实曲面，但计算量也越大，放大后还是曲面，不具备高精度的尺寸控制，无法导出矢量模型 常见建模软件有C4D、Maya、3ds Max、Blender、ZBrush等
Nurbs是非均匀有理b样条，是基于数学公式的曲面，真正的曲面，可以导出矢量图，因其高精度，常用于工业设计领域，包括
1. CAID 外观设计领域 如RHino Alias
2. CAD类型 结构工程 结构建模，如UG CATIA SolidWorks AutoCAD